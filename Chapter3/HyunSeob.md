# 3. 자료구조는 적게, 일은 더 많이

# 3.1 애플리케이션의 제어 흐름

- 제어 흐름이란: 프로그램이 정답에 이르기까지 거치는 경로.
- 명령형 프로그램은 이 제어 흐름을 아주 자세히 서술한다.
- 함수형 프로그램은 독립적인 블랙박스(밖에서 볼 수 없는) 연산들이 단순하게 연결된다.

# 3.2 메서드 체이닝

- 메서드 체이닝은 여러 메서드를 단일 구문으로 호출하는 패턴이다.
- 기본적으로 OOP에서 자주 사용하는 패턴이지만 함수형에도 잘 맞는편이다.
- 함수형 코드를 충실히 반영한 코드에 비해, 가독성이 높은 편이다.

# 3.3 함수 체이닝

- 객체지향 프로그래밍은 상속을 통해 코드를 재사용한다.
- 함수형 프로그래밍은 자료구조를 새로 만들지 않고, 흔한 자료구조를 이용해 다수의 오퍼레이터를 사용한다.

## 3.3.1 람다 표현식

- 람다 표현식은 함수형 프로그래밍으로부터 탄생했다.
- 일반함수를 보다 단축된 구문으로 나타낸다. (대부분 한 줄로 사용한다)
- 람다 표현식은 변수에 할당할 수 있으므로 함수형 프로그래밍과 잘 맞는다.
  - ?? 람다 표현식말고 일반 함수 표현식도 변수에 할당 가능한디..

## 3.3.2 `_.map`: 데이터를 변환

- 데이터를 파싱하는 경우 유용
- 항상 새로운 배열을 반환하므로 불변성
- `map`은 항상 왼쪽에서 오른쪽으로 진행하기 때문에 순서를 바꾸기 위해서는 `reverse`가 필요하다.
- Array를 로대시 함수에 감싸서 드셔보세요!

## 3.3.3 `_.reduce`: 결과를 수집

- 원소 배열을 하나의 값으로 반환함
- 맵과 리듀스를 같이 사용하면 더 확장가능하게 만들 수 있다.
- reduce는 누산치에 의존하므로 결합법칙이 성립하지 않는다면, 진행순서에 따라 결과가 달라진다.
- reduce는 무조건 모든 원소를 거치기 때문에 특정 연산의 경우 비효율적일 수 있다.

## 3.3.4 `_.filter`: 원하지 않는 원소를 제거

- 계산하지 않을 원소는 사전에 제거하면 좋다.
- `filter`는 특정 조건에 맞는 원소만 반환하여 새로운 배열을 만든다.

# 3.4 코드 헤아리기

## 3.4.1 선언적 코드와 느긋한 함수체인

- 함수형 프로그래밍에서 프로그램은 개별적인 순수함수들을 평가하는 과정이다.
- 온톨로지? 어휘집? 무슨 소린지 모르겠다
- 함수형 프로그래밍은 자료구조보다는 연산에 중점을 둔다.
- 함수 체인을 사용할 경우 인덱스를 순회하는 등의 일은 고계함수가 대체하므로 로직을 구현하는데 집중할 수 있다.
- 로대시의 체인을 쓰면 느긋하게 작동(Lazy Evaluation)시키는 장점이 있다.

## 3.4.2 유사 SQL 데이터: 데이터로서의 함수

- 함수형 프로그래밍의 고계함수는 SQL과 닮아있다.
- 쿼리를 구사하듯 개발하는 것과 함수형 프로그래밍에서 배열에 연산을 적용하는 건 일맥상통한다.
- 자바스크립트도 SQL처럼 데이터를 함수형태로 모형화할 수 있고 이를 Function as a Data라고 부른다.

# 3.5 재귀적 사고방식

## 3.5.1 재귀란?

- 재귀는 주어진 문제를 자기 반복적인 문제로 잘게 분해하고, 이걸 다시 조합해 원래 문제의 정답을 찾는 기법.
- 재귀의 구성요소
  - 기저 케이스(종료 조건)
  - 재귀 케이스
- 초기에 받은 입력집합은 재귀를 반복하면서 점점 작아져야 한다.

## 3.5.2 재귀적으로 생각하기

- 재귀적 사고란, 자기 자신 또는 그 자신을 변형한 버전을 생각하는 것 (재귀의 구성요소와 같음)
- 재귀는 변이가 없기 때문에 더 강력하고 우수하여 표현적이다.
- 재귀는 언어 런타임에 루프를 맡기는 것이다.

## 3.5.3 재귀적으로 정의한 자료구조

- 트리는 아주 일반적인 자료구조다.
- 함수형 기법은 대부분 평탄한 자료구조, 배열에 사용하기 좋으므로 트리에는 적절치 않다.
- 자바스크립트는 트리를 내장하지 않으므로 트리를 표현하기 위해서는 새로운 자료구조를 만들어야 한다.

# 이번 주 문제(현섭)

다음 처럼 동작하는 `toUpperString` 함수를 재귀 함수를 써서 작성하세요.

```javascript
// 입력은 항상 Valid한 HTML 문자열
function toUpperString(html) {
  // ...
}

const case1 = "<h1>Hello</h1>";
toUpperString(case1); // return '<h1>HELLO</h1>'

const case2 = "<p>Functional<span>Programming</span>Study</p>";
toUpperString(case2); // return '<p>FUNCTIONAL<span>PROGRAMMING</span>STUDY</p>'

const case3 = "I'm HyunSeob";
toUpperString(case3); // return 'I\'M HYUNSEOB'

const case4 = "";
toUpperString(case4); // return ''
```

힌트1: 가상의 DOM을 만들어 `inerHTML`을 사용해서 HTML 문자열을 파싱하면 편리합니다.
힌트2: DOM API를 적극적으로 활용하셔도 됩니다.
힌트3: 추가적인 함수를 더 정의하셔도 됩니다.
