# Part1 함수형으로 사고하기
## Chapter1 함수형 길들이기

date : 19.02.18


> 객체지향(OO)은 가동부를 캡슐화하여 코드의 이해를 도움
> 
> 함수형 프로그래밍은(FP)은 `가동부를 최소화`하여 코드의 이해를 도움

 
---
### 1.1 함수형 프로그래밍은 과연 유용한가?

**FP 사고방식**
- 확장성 : 추가 기능 확장이 용이하도록
- 모듈화 용이성 : 다른 파일에 영향을 받지 않도록
- 재사용성 : 중복을 줄이자
- 테스트성 : 단위 테스트가 쉽도록
- 헤아리기 쉬움 : 체계가 있고 따라하기 쉽도록
  

**기본개념**
- 선언적 프로그래밍
- 순수함수 : 상태변이를 일으키지 않도록
- 참조 투명성
- 불변성


자바스크립트만의 매우 표현적인 특성을 가다듬어, 깔끔하면서도 모듈적인, 테스트하기 좋고 간결한 코드를 작성하는 데 도움이 되고 업무 능률 향상

순수함수에 기반을 두고 이미 검증된 기법에 따라 구현하면 코드가 복잡해지더라도 헤아리기 쉬운 방향으로 작성할 수 있음

전체 애플리케이션 품질을 향상시키는 동시에 자바스크립트 언어를 더 잘 이해할 수 있음

---

### 1.2 함수형 프로그래밍이란?
`함수 사용을 강조`하는 소프트웨어 개발 스타일로 하나의 코드 작성 방법

애플리케이션의 부수효과(side effect)를 방지하고 상태 변이(mutation of state)를 감소하기 위해 데이터의 제어 흐름과 연산을 추상(abstract)하는 것

>Before
```js
function printMessage(elementId, format, message){
    document.querySelector(`#${elementId}`).innerHTML = 
    `<${format}>${message}</${format}>`
}
```
>After
```js
var printMessage = run(addToMsg('msg'), h1, echo);
printMessage('hello songs');
```

**함수형 프로그래밍의 기본원리**

재사용성, 믿음성이 좋고 이해하기 쉬운 작은 조각들로 프로그램을 나눈 후,
전체적으로 더 헤아리기 쉬운 형태의 프로그램으로 조합하는 과정

코드를 쉽게 변경하기 위해 코드 자체를 매개변수화

---

#### 1.2.1 함수형 프로그래밍은 선언적

`선언적(declarative)`프로그래밍 패러다임

내부적으로 코드를 어떻게 구현했는지, 데이터는 어떻게 흘러가는지 밝히지 않은 채 연산/작업을 표현, 함수로 추상하는 작업

제어 흐름이나 상태 변화를 특정하지 않고도 프로그램 로직이 무엇인지 표현식으로 나타냄

함수를 매개변수로 받는 `map, reduce, filter`같은 고계함수를 이용해 재사용성, 확장성이 우수한 선언적 코드로 대체하자

---

#### 1.2.2 순수함수와 부수효과

>순수함수

`불변 프로그램 구축`을 전제로 함

- 주어진 입력에만 의존하여 변경될 수 있는 숨겨진 값이나 외부상태와 무관하게 작동
- 함수 수코프 밖에서 어떠한 변경도 일으키지 않음

익숙한 명령형 프로그래밍에서는 변수가 옮겨지면서 그 값이 변하게 됨

자신의 스코프에 없는 외부변수를 읽고 수정하게 되면서 부수효과를 일으키고 호출 도중에 언제라도 변할 수 있어서 어떤 값이 반환될지 알 수 없게 되는 문제 발생

온갖 변경이 난무하는 프로그램에서 순수함수를 사용하기란 어려울수 있지만, `상태 변이를 줄이고 관리할 수 있는` 프레임워크를 제공하여 순수/불순 함수를 구분 하자


>`커링(currying)`기법

함수의 여러 인수를 부분적으로 나누어 세팅하여 쉽게 조합해서 실행 가능한 함수로 만듦

---

#### 1.2.3 참조 투명성과 치환성

참조 투명성은 순수함수를 정의하는 공식적인 방법

`순수성` : 함수의 인수와 결괏값 사이의 순수한 매핑 관계

어떤 함수가 동일한 입력을 받았을 때 동일한 결과를 내면 `참조 투명한`함수

> Before
```js
var counter = 0;

function increment(){
    return ++counter;
}
```

외부 변수를 제거하고 함수 서명에 정규 매개변수로 명시

> After ES6 람다 표현식
```js
var increment = counter => counter + 1;
```

코드 테스트와 전체 로직 파악 용이

---

#### 1.2.4 불변 데이터 유지하기

기본형은 처음부터 불변이지만 배열 등의 객체는 불변이 아니어서 함수 인수로 전달해도 원래 내용이 변경되어 부수효과가 발생할 소지가 남아 있음, 이를 극복하는 방안은 다음 장 이후에...

`함수형 프로그래밍`은 외부에서 관찰 가능한 `부수효과가 제거`된 `불변 프로그램`을 작성하기 위해 `순수함수`를 `선언적`으로 평가하는 것

---

**문제점**

- 뚜렷한 체계 없이 분기 처리 남발
- 외부 공유 변수에 지나치게 의존하는 덩치 큰 함수 과용
- 많은 파일이 한데 뒤섞여 추적/디버깅이 어려움
- 가변/전역 데이터를 공유하는 촘촘한 그물망이 형성 됨
  
---

### 1.3 함수형 프로그래밍의 좋은 점

어떤점이 좋은지 3가지 측면에서 살펴보자

- 간단한 함수들로 작업을 분해
- 흐름 체인으로 데이터를 처리
- 리액티브 패러다임을 실현하여 이벤트 중심 코드의 복잡성을 줄임
---

#### 1.3.1 복잡한 작업을 분해하도록 유도

FP에서 모듈화는 단일성의 원리와 밀접한 관련

모름지기 함수는 저마다 한 가지 목표만 바라봐야 한다

`합성`기법 : 두 함수를 합성하여 다음 함수에 밀어 넣는 새로운 함수가 탄생

고수준의 추상화를 통해 자세한 내막을 밝히지 않아도 코드가 수행하는 전단계를 일목요연하게 나타냄

---

#### 1.3.2 데이터를 매끄럽게 체이닝하여 처리

함수체인은 필요한 시점까지 실행을 미루는 느긋한 평가를 수행

다른 데에선 쓸일이 없는 일련의 코드를 전부 실행하지 않아도 되니 CPU부하가 감소하여 성능 향상

필요 시 호출 

---

#### 1.3.3 복잡한 비동기 애플리케이션에서도 신속하게 반응


**`리액티브 프로그래밍`**

- 비동기 데이터 흐름에 기반을 둔 프로그래밍 패러다임함수형 프로그래밍의 응용분야
- 비동기 코드, 이벤트 중심 코드의 복잡도를 현저하게 줄이는데 도움
- 더 높은 수준으로 코드를 추상하고 함수를 체인으로 묶고 합성
- 순수함수를 이용하여 `map, reduce` 처럼 많이 쓰는 연산으로 데이터를 처리할 수 있고 람다 표현식의 간결함을 누릴 수 있다는 이점
- 옵저버블(관찰 가능) 이라는 중요한 장치를 매개로 움직임


---

### 문제

[Pure Functions / Currying](https://www.codingame.com/playgrounds/2980/practical-introduction-to-functional-programming-with-js/pure-functions)