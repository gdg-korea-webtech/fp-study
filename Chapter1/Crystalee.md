# Part1 함수형으로 사고하기

## 함수형 프로그램이 해결해 줄 수 있는 것

- 확장성: 리팩토링을 적게 하면서(또는 하지않으면서) 추가 기능을 지원할 수 있어야 함
- 모듈화 용이성: 파일 하나를 변경하더라도 다른 파일을 변경할 필요가 없음
- 재사용성: 중복이 많지 않다
- 테스트성: 함수를 단위테스트 할 수 있다
- 헤아리기 쉬움: 코드가 체계가 있음. 따라가기 쉬움. 이해하기 쉬움

함수형 프로그래밍이란 '객체지향 프로그래밍', '절차지향 프로그래밍' 처럼 프로그래밍 패러다임이다.
함수형 프로그래밍을 배운다: 함수형으로 생각하고 코딩하는 것을 배운다.

함수형 프로그래밍
함수 사용을 강조하는 소프트웨어 개발스타일.
목표: Side Effect를 방지하고 상태변이(mutation of status)를 감소하기 위해 데이터의 제어 흐름과 연산을 추상(abstract)하는 것

예) 어떤 메시지를 어떤 형식(태그) 로 화면에 표현되도록 만든다.
각 내용을 쪼개보면

1. 어떤 메시지
2. 어떤 태그형식
3. 화면에 표현하기
이렇게 세가지 기능이다.

이 각각 기능을 함수인 파라미터로 받은 후, 받은 파라미터 함수들을 합쳐서 새로운 함수를 만든다

```javascript
var 메시지표현하기 = function 함수메이커(화면에표현, 태그생성, 메시지받기) {
  return function 새로운 함수(텍스트) {
    // 상위스코프의 파라미터들 + '텍스트'를 이용하여 동작을 수행한다.
  }
}
메시지표현하기('someText');
```

수학에서 합성함수와 비슷한 느낌.
본연의 기능은 간직한 채 코드를 쉽게 변경하기 위해 코드 자체를 매개변수화 하는 것!

---

## FP를 이해하기 위한 기본 개념

- 선언적 프로그래밍
- 순수함수
- 참조 투명성
- 불변성

### 선언적(declarative) 프로그래밍

내부적으로 코드를 어떻게 구현했는지, 데이터는 어떻게 흘러가는지 밝히지 않은 채 연산/작업을 표현하는 사상
  이것과 대비되는 기존의 것들: (명령형imperative, 명령형procedural)
프로그램의 서술부(description)와 평가부(evaluation)를 분리하여 제어 흐름이나 상태 변화를 특정하지 않고도 프로그램 로직이 무엇인지를 표현식(expression)으로 나타냄. (ex: SQL)

### 챰조 투명성 referential transparency(등식 적합성 equational correctness)

동일한 입력이 주어질 때 동일한 출력을 뱉는 성질

### 순수함수(= 참조 투명한 함수) ( <=> 상태적(stateful) 함수)

인수와 결과값 사이의 순수한 매핑 관계를 만들어주는 함수. 동일 파라미터 - 동일 결과
순수함수로 작성한 코드는 테스트하기도 쉽고, 전체 로직을 파악하기도 쉽다. (사이드이펙트를 일일히 찾지 않아도 되니까) -> 재작성 및 치환도 마찬가지로 쉽다.
순수함수로 짠 프로그램의 경우 수학적인 형태로 프로그램을 헤아릴 수 있다.(정해진 입력이라고 가정하면 마찬가지로 출력도 정해져있기 때문에 해당 모듈을 어떤 형태로 가정하고 프로그램을 짤 수 있다)

### 불변성

한번 만들어진 객체를 변화시키지 않아야 함. (리액트 리덕스의 불변성이랑 비슷한 것 같다?)
변경된 새로운 데이터가 필요하면 변경분을 반영한 새로운 객체를 만든다.

### 결국, 함수형 프로그래밍이란

`외부에서 관찰 가능한(observable)` `부수효과가 제거된(side-effect free)` `불변 프로그램(immutable)` 을 작성하기 위해 `순수함수`를 `선언적(declarative)`으로 `평가(evaluation)`하는것

~~이게 뭔소리야...~~
사이드이펙트 없고 보기좋으면서(선언적? SQL처럼 데이터를 어떻게 가져오는지는 모르지만 가져온 것을 어떻게 가공해서 얻어오겠다는 것이 쭉 읽히는것) 예상하기도 쉬운(동일인풋이라면 동일아웃풋), 또 조합해서 재사용하기도 쉬운 코드를 작성하는 사고방식을 함수형 프로그래밍이라고 하는 것 같다. ~~책을 더 보면 이해가 되겠지...~~

---

## FP의 장점

1. **함수형 프로그램은 분해-합성 으로 프로그램을 작성하는으로 인한 장점**
함수를 분해하는 과정에서 각 태스크를 잘게 쪼개서 작성할 수 있도록 한다. 하나의 함수는 하나의 작업만 수행하도록 하기에 좋아짐(singularity 단일성의 원리)
함수형으로 합성한 코드는 그 자체를 읽으면서 해석이 가능하다. (조립하기 위해 나열한 녀석들을 해석하면 그대로 의미를 알 수 있다)
2. **체이닝이 가능함으로 인해 생기는 장점**
특정 동작을 정말로 필요할 때 수행한다. 미리 필요없는 기능을 수행하지 않을 수 있다.(lazy evaluation 게으른 평가)
다른 함수형 언어의 call-by-need(필요 시 호출) 동작을 모방할 수 있다.
3. **비동기 어플리케이션에서 Reactive Programming이라는 패러다임과 잘 맞아떨어짐**
함수형 리액티브 프로그래밍(FRP: functional reactive programming) 좋은 아키텍처를 사용할 수 있게 된다

하지만 모든 절차지향을 FP로 대체한다! 는 생각이 아니라, 함수형으로 접근했을 때 깔끔하고 멋지게 해결되는 부분을 함수형으로 작성하면 크게 이득이다! 라는 식으로 이해하면 될 것 같다.

---

## 해결해야 할 질문

- 커링? currying? [여기 참고](https://edykim.com/ko/post/writing-a-curling-currying-function-in-javascript/)
  - 커링은 나중에 나올 때 더 자세하게 공부하면 되겠다
- 리액티브 프로그래밍
- declarative, evaluation -  선언적 / 평가 보다 더 와닿는 한국말이 없을까..
  - 평가! 는 자바스크립트 코드 라인 하나가 각각 어떤 '실험'이라고 생각하고, 그것을 실제로 실행해봐서 결과를 '평가'하기 때문에 evaluation이라는 단어를 사용한다고 생각하면 좋다.

---

## 과제

[현섭님 문제](https://github.com/gdg-korea-webtech/fp-study/blob/master/Chapter1/HyunSeob.md)
[_.clone(value)](https://lodash.com/docs/4.17.11#clone)
